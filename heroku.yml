# scripts:
#   - echo 'hello word'
setup:
  addons:
  - FROM python:3-alpine
  - RUN apk add --no-cache git && pip install gitdb2==3.0.0 trufflehog
  - RUN adduser -S truffleHog
  - USER truffleHog
  - WORKDIR /proj
  - ENTRYPOINT [ "trufflehog" ]
  - CMD [ "-h" ]
  - RUN trufflehog --regex --entropy=True https://github.com/sadiaashfaq2812/react-buggy.git

build:
  # command:
  #   - docker run -v /workspace:/proj dxa4481/trufflehog --regex --entropy=true file:///proj
  # script:
  #   - docker pull dxa4481/trufflehog
  #   - truffleHog --regex --entropy=False https://github.com/sadiaashfaq2812/react-buggy.git
  docker:
    # worker: worker/Dockerfile
    web: Dockerfile
    # web: truffleHog --regex --entropy=False https://github.com/dxa4481/truffleHog.git
    # web: docker pull gesellix/trufflehog
  # - run gesellix/trufflehog --json --regex https://github.com/sadiaashfaq2812/react-buggy.git > trufflehog
      
# tools and run commands
run:
  # web: npm i -g trufflehog
  # web: trufflehog
  web: dxa4481/trufflehog
  web: dxa4481/trufflehog --regex --entropy=False https://github.com/sadiaashfaq2812/react-buggy.git
  # web: truffleHog --regex --entropy=False https://github.com/sadiaashfaq2812/react-buggy.git > trufflehog
  web: pwd
  web: npm run start
  web: ls

# release:
#   image: web
#   command:
#     - npm run migrate up





